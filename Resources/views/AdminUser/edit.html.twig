{% extends '::admin.html.twig' %}

{% block page_title %}Edit | Users | {% endblock %}
{% block header_page_title %}Edit User{% endblock %}

{% block content %}
    {% include 'flash_messages.html.twig' %}

    {% embed 'XMUserAdminBundle:AdminUser:user_form.html.twig' %}

        {% block extra_actions %}
            <ul class="form-extra_actions">
                {% if user.isEnabled == false %}
                    <li>
                        <a href="{{ path('xm_security_resend_confirmation', { id: user.id }) }}" class="form-action form-action_link">Resend Activation Email</a>
                    </li>
                    <li>
                        {{ form_start(activate_form) }}
                            <button class="button-as_link form-action form-action_link">Activate Account</button>
                        {{ form_end(activate_form) }}
                    </li>
                {% endif %}
                <li>
                    {{ form_start(reset_password_form) }}
                        <button class="button-as_link form-action form-action_link">Send Password Reset</button>
                    {{ form_end(reset_password_form) }}
                </li>
                <li>
                    {{ form_start(lock_unlock_form) }}
                        {# this button is generated by the form because the display value will change #}
                        {{
                            form_widget(lock_unlock_form.button, {
                                'attr' : {
                                    'class' : 'button-as_link form-action form-action_link'
                                }
                            })
                        }}
                    {{ form_end(lock_unlock_form) }}
                </li>
                {% if user.deletable %}
                    <li>
                        <admin-delete
                            action="{{ delete_form.vars.action }}"
                            record-desc="User"
                            csrf-token="{{ delete_form._token.vars.value }}">
                        </admin-delete>
                    </li>
                {% endif %}
                <li class="form-extra_actions_text pt-1 text-sm text-grey-dark">
                    <div>
                    Account Status:
                    {% if user.enabled == false %}
                        <em>Disabled</em>
                    {% elseif user.locked == true %}
                        <em>Locked</em>
                    {% else %}
                        Active
                    {% endif %}
                    </div>
                </li>
            </ul>
        {% endblock extra_actions %}

    {% endembed %}
{% endblock content %}